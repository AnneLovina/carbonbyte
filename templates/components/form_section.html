{# components/form_section.html #}
{% macro render_form_section(form, title, description, has_previous=true) %}
<div class="card w-full bg-base-100 shadow-xl">
    <div class="card-body">
        <h2 class="card-title text-2xl mb-4">{{ title }}</h2>
        <p class="text-base-content/70 mb-6">{{ description }}</p>

        <form method="POST" class="space-y-6">
            {{ form.hidden_tag() }}
            {% for field in form if field.type != 'CSRFTokenField' and field.type != 'SubmitField' %}
            <div class="form-control w-full">
                {{ field.label(class="label label-text text-base font-medium") }}
                <div class="relative">
                    {% if field.type == 'SelectField' %}
                    {{ field(class="select select-bordered w-full") }}
                    {% else %}
                    {{ field(class="input input-bordered w-full") }}
                    {% endif %}
                </div>
                {% if field.errors %}
                <div class="label">
                    <span class="label-text-alt text-error">
                        {% for error in field.errors %}
                        {{ error }}
                        {% endfor %}
                    </span>
                </div>
                {% endif %}
            </div>
            {% endfor %}

            <div class="card-actions justify-end mt-8">
                {% if has_previous %}
                <a href="{{ url_for('prev_step') }}" class="btn btn-outline">Previous</a>
                {% endif %}
                {{ form.submit(class="btn btn-primary") }}
            </div>
        </form>
    </div>
</div>
{% endmacro %}