{# results.html #}
{% extends "base.html" %}
{% from "components/stepper.html" import render_stepper %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <div class="text-center mb-12">
        <h1 class="text-4xl font-bold mb-3">Digital Carbon Calculator</h1>
        <p class="text-xl text-base-content/70">Your Carbon Footprint Results</p>
    </div>

    {{ render_stepper(4, total_sections, visited_sections) }}

    <div class="max-w-2xl mx-auto">
        <div class="card w-full bg-base-100 shadow-xl">
            <div class="card-body">
                <h2 class="card-title text-2xl mb-6">Summary of Your Inputs</h2>

                {# Server Infrastructure Section #}
                <div class="mb-8">
                    <h3 class="text-xl font-semibold text-primary mb-4">Server Infrastructure</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="text-base-content/70">Server Location:</div>
                        <div class="font-medium">{{ server_data.get('location', 'Not specified') | replace('_', ' ') |
                            title }}</div>

                        <div class="text-base-content/70">Server Type:</div>
                        <div class="font-medium">{{ server_data.get('type', 'Not specified') | replace('_', ' ') | title
                            }}</div>

                        <div class="text-base-content/70">CPU Usage:</div>
                        <div class="font-medium">{{ server_data.get('cpu_usage', 'Not specified') }}%</div>
                    </div>
                </div>

                {# Storage Section #}
                <div class="mb-8">
                    <h3 class="text-xl font-semibold text-primary mb-4">Storage Configuration</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="text-base-content/70">Storage Type:</div>
                        <div class="font-medium">{{ storage_data.get('type', 'Not specified') | replace('_', ' ') |
                            upper }}</div>

                        <div class="text-base-content/70">Storage Amount:</div>
                        <div class="font-medium">{{ storage_data.get('amount', 'Not specified') }} GB</div>
                    </div>
                </div>

                {# Network Section #}
                <div class="mb-8">
                    <h3 class="text-xl font-semibold text-primary mb-4">Network Usage</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="text-base-content/70">Monthly Bandwidth:</div>
                        <div class="font-medium">{{ networking_data.get('bandwidth', 'Not specified') }} GB</div>

                        <div class="text-base-content/70">CDN Usage:</div>
                        <div class="font-medium">{{ networking_data.get('cdn', 'Not specified') | replace('_', ' ') |
                            title }}</div>
                    </div>
                </div>

                {# Calculated Carbon Footprint #}
                <div class="mt-8 p-6 bg-base-200 rounded-lg">
                    <h3 class="text-xl font-semibold text-primary mb-4">Estimated Carbon Footprint</h3>
                    <div class="stats stats-vertical lg:stats-horizontal shadow">
                        <div class="stat">
                            <div class="stat-title">Monthly CO2 Emissions</div>
                            <div class="stat-value text-primary">{{ carbon_footprint.get('monthly', 0) | round(2) }}
                            </div>
                            <div class="stat-desc">kg CO2e</div>
                        </div>

                        <div class="stat">
                            <div class="stat-title">Yearly CO2 Emissions</div>
                            <div class="stat-value text-primary">{{ carbon_footprint.get('yearly', 0) | round(2) }}
                            </div>
                            <div class="stat-desc">kg CO2e</div>
                        </div>
                    </div>
                </div>

                <div class="card-actions justify-end mt-8">
                    <a href="{{ url_for('step', step_number=1) }}" class="btn btn-outline">Start Over</a>
                    <button onclick="window.print()" class="btn btn-primary">Export Results</button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}