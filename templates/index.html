{# index.html #}
{% extends "base.html" %}
{% from "components/stepper.html" import render_stepper %}
{% from "components/form_section.html" import render_form_section %}
{% from "components/completion_modal.html" import render_completion_modal %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <div class="text-center mb-12">
        <h1 class="text-4xl font-bold mb-3">Digital Carbon Calculator</h1>
        <p class="text-xl text-base-content/70">Calculate the carbon footprint of your digital product</p>
    </div>

    {{ render_stepper(current_section, total_sections) }}

    <div class="max-w-2xl mx-auto">
        {% for step_num in range(1, total_sections + 1) %}
        {% if current_section == step_num %}
        {% set form = forms['form_' ~ step_num] %}
        <form method="POST">
            {{ form.hidden_tag() }}
            {{ render_form_section(form, title, description) }}
            {{ form.submit() }}
        </form>
        {% endif %}
        {% endfor %}
    </div>
</div>

{% endblock %}